{% extends 'index.html' %} {% block body %}

<header>
    <div class="header-title">
        <div class="title">BiTe Playground</div>
    </div>
    <div class="container form-background">
        <div>
            <form method="POST" action="">
                {{ initialConfig.hidden_tag() }}
                <div class="combobox-container" >
                    <label for="problem" class="label-header">Problema:</label>
                    {{ initialConfig.problem(class="combo-header") }}

                    <label for="algorithm" class="label-header">Algoritmo:</label>
                    {{ initialConfig.algorithm(class="combo-header") }}
                    <div class="button-container">
                        <button type="submit" class="btn btn-primary">Aplicar</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="button-container">
            <button id="download-btn" onclick="downloadReport()">Descargar Reporte</button>
        </div>
    </div>
</header>

<main>
        <div class="left-panel">
        <div id="configFormContainer" style="display: none;">
            <h3>Configuraciones</h3>
            <div class="form-background">
                 <form method="POST" action="" id="config-form">
                    {{ gaConfigForm.hidden_tag() }}
                    <div class="form-group">
                        {{ gaConfigForm.population_size.label(class="label-form") }}
                        {{ gaConfigForm.population_size(class="form-control", id="population_size") }}
                    </div>

                    <div class="form-group">
                        {{ gaConfigForm.generations.label(class="label-form") }}
                        {{ gaConfigForm.generations(class="form-control", id="generations") }}
                    </div>

                     <div class="form-group">
                        {{ gaConfigForm.selection_rate.label(class="label-form") }}
                        {{ gaConfigForm.selection_rate(class="form-control", id="selection_rate") }}
                    </div>

                    <div class="form-group">
                        {{ gaConfigForm.selection_type.label(class="label-form") }}
                        {{ gaConfigForm.selection_type(class="form-control", id="selection_type") }}
                    </div>

                    <div class="form-group">
                        {{ gaConfigForm.crossover_type.label(class="label-form") }}
                        {{ gaConfigForm.crossover_type(class="form-control", id="crossover_type") }}
                    </div>

                    <div class="form-group">
                        {{ gaConfigForm.mutation_rate.label(class="label-form") }}
                        {{ gaConfigForm.mutation_rate(class="form-control", id="mutation_rate") }}
                    </div>

                    <div class="form-group">
                        {{ gaConfigForm.mutation_type.label(class="label-form") }}
                        {{ gaConfigForm.mutation_type(class="form-control", id="mutation_type") }}
                    </div>

                     <div class="button-container">
                         {{ gaConfigForm.execute_button(class="button", id="execute_button") }}
                     </div>

                </form>
            </div>
        </div>
    </div>

    <div class="right-panel">
        <h3>Resultados de la ejecución</h3>
        <div>
            {% for item in content %}
                <h2>Iteración {{ item.iteration }}</h2>
                <div class="graph-conf">
                    <h3>Configuración</h3>
                    {{ item.config_html|safe }}
                    <h3>Gráfico</h3>
                    <img src="data:image/png;base64,{{ item.graph }}" alt="Gráfico Iteración {{ item.iteration }}">
                </div>
                    <h3>Datos de Ejecución</h3>
                    {{ item.exec_data_html|safe }}
                <hr>
            {% endfor %}
        </div>
    </div>
</main>

{% endblock %}