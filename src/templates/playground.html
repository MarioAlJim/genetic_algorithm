{% extends 'index.html' %} {% block body %}

<header>
    <div class="header-title">
        <div class="title">BiTe Playground</div>
    </div>
    <div class="initial-form">
        <form method="POST" class="initial-form-left">
            {{ initial_config.hidden_tag() }}
            <label for="problem" class="label-header">{{ _('Problem:') }}</label>
            {{ initial_config.problem(class="combo-header") }}

            <label for="algorithm" class="label-header">{{ _('Algorithm:') }}</label>
            {{ initial_config.algorithm(class="combo-header") }}
            <div>
                {{ initial_config.initial_config_button(class="button")}}
            </div>
        </form>
        <div class="initial-form-right ">
            <div>
                {% if allow_download %}
                    <button id="download-btn" onclick="downloadReport()">{{ _('Download report') }}</button>
                {% else %}
                    <button disabled>{{ _('Download report') }}</button>
                {% endif %}
            </div>
            <div>
                <select onchange="location = '/setlang?lang=' + this.value;" class="label-form">
                    <option value="en" {{ 'selected' if get_locale() == 'en' else '' }}>{{ _('English') }}</option>
                    <option value="es" {{ 'selected' if get_locale() == 'es' else '' }}>{{ _('Spanish') }}</option>
                </select>
            </div>
        </div>
    </div>
</header>

<main>
    <div class="left-panel">
        <div id="configFormContainer">
            <h3>{{ _('Algorithm settings') }}</h3>
            <div class="form-background">
                {% if config_form %}
                    {% include config_form + "_template.html" %}
                {% endif %}
            </div>
        </div>
    </div>

    <div class="right-panel">
        {% if content %}
        <h2>{{ _('Execution results') }}</h2>
        <div>
            {% for item in content %}
                <div class="initial-form"  id="div-results">
                    <div class="config-table">
                        <h3>{{ _('Applied configuration') }}</h3>
                        {{ item.config_html|safe }}
                    </div>
                    <div class="graph-conf">
                        <h3>{{ _('Execution analysis graphs') }}</h3>
                        <img src="data:image/png;base64,{{ item.plot_grap }}" alt="plot_grap">
                        <img src="data:image/png;base64, {{ item.box_graph }}" alt="box_graph">
                    </div>
                </div>
                    <h3>{{ _('Test data generated') }}</h3>
                    {{ item.exec_data_html|safe }}
                <hr>
            {% endfor %}
        </div>
        {% else %}
            <div class="content">
                <h3>{{ _('Results') }}</h3>
                <div class="content-background">
                    <p>{{ _('Run the algorithm to be able to visualize the results.') }}</p>
                </div>
            </div>
        {% endif %}
    </div>
</main>

{% endblock %}