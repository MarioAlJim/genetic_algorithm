{% extends 'index.html' %} {% block body %}
    <header>
        <div class="header__title">
            <h1 class="title">BiTe Playground</h1>
        </div>
    </header>

    <main class="playground">
        <div id="configFormContainer" class="playground__left-panel">
            <h2 class="title">{{ _('Playground context') }}</h2>

            <div class="playground__left-panel-form">
                <form method="POST" class="playground__left-panel-form playground__left-panel-form--no-padding">
                    {{ context.hidden_tag() }}
                    <label for="{{ context.problem.id }}" class="form__item-label">
                        {{ context.problem.label.text }}
                        <span class="tooltip">
                            <i class="fas fa-circle-info"></i>
                            <span class="tooltip__text">{{ _('System selected for experimentation of test data generation.') }}</span>
                        </span>
                    </label>
                    {{ context.problem(class="form__item-input") }}
                    <label for="{{ context.algorithm.id }}" class="form__item-label">
                        {{ context.algorithm.label.text }}
                        <span class="tooltip">
                            <i class="fas fa-circle-info"></i>
                            <span class="tooltip__text">{{ _('Algorithm selected for test data generation.') }}</span>
                        </span>
                    </label>
                    {{ context.algorithm(class="form__item-input") }}
                    {{ context.apply_button(class="form__item-button") }}
                </form>
            </div>

            {% if config_form_template %}
                <h2 class="title">{{ _('Algorithm settings') }}</h2>
                <div class="playground__left-panel-form">
                    <form id="config-form" method="POST" class="playground__left-panel-form playground__left-panel-form--no-padding">
                        {% include config_form_template %}
                    </form>
                    <form action="{{ url_for('playground_blueprint.download_report') }}" method="GET" class="playground__left-panel-form playground__left-panel-form--no-padding">
                        <input id="download-btn" type="submit" value="{{ _('Download report') }}" class="form__item-button" {% if not allow_download %}disabled{% endif %}>
                    </form>
                </div>
            {% endif %}
        </div>

        <div id="div-results" class="playground__right-panel">
            <h2 class="title">{{ _('Execution results') }}</h2>
            <div class="playground__right-panel-output">
                {% if content %}
                    <div class="output__item">
                        <h3 class="title">{{ _('Applied configuration') }}</h3>
                        <div>{{ content.config_html|safe }}</div>
                    </div>
                    <div class="output__item">
                        <h3 class="title">{{ _('Execution analysis graphs') }}</h3>
                        <img src="data:image/png;base64,{{ content.plot_graph }}" class="output__item-image" alt="plot_graph">
                        <img src="data:image/png;base64, {{ content.box_graph }}" class="output__item-image" alt="box_graph">
                    </div>
                    <div class="output__item">
                        <h3 class="title">{{ _('Test data generated') }}</h3>

                        <h2 class="title"> {{ _('Page') }} {{ content.current_page }} of {{ content.total_pages }}</h2>

                        <div>{{ content.exec_data_html | safe }}</div>

                        <nav aria-label="Pagination">
                            <ul class="pagination">
                                {% if content.current_page > 1 %}
                                    <li class="pagination__item">
                                        <a class="pagination__link" href="{{ url_for('playground_blueprint.show_ga_playground', page=content.current_page - 1) }}">Previous</a>
                                    </li>
                                {% endif %}

                                {% for p in range(1, content.total_pages + 1) %}
                                    <li class="pagination__item {% if p == content.current_page %}pagination__item--active{% endif %}">
                                        <a class="pagination__link" href="{{ url_for('playground_blueprint.show_ga_playground', page=p) }}">{{ p }}</a>
                                    </li>
                                {% endfor %}

                                {% if content.current_page < content.total_pages %}
                                    <li class="pagination__item">
                                        <a class="pagination__link" href="{{ url_for('playground_blueprint.show_ga_playground', page=content.current_page + 1) }}">{{ _('Next') }}</a>
                                    </li>
                                {% endif %}
                            </ul>
                        </nav>

                    </div>
                {% else %}
                    <p class="output__item">{{ _('Run the algorithm to be able to visualize the results.') }}</p>
                {% endif %}
            </div>
        </div>
    </main>

{% endblock %}